import{c as D,r as s,j as e,S as U,U as E}from"./index-BHdtNLGV.js";import{F as M,D as z,S as L}from"./StatusBadge-C7zj7z_R.js";import{M as T}from"./more-vertical-Bhww0Hwk.js";/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $=D("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);function V(){const[g,u]=s.useState([]),[B,j]=s.useState([]),[l,b]=s.useState(""),[f,w]=s.useState(!0),[N,x]=s.useState(!1),[i,v]=s.useState(null),[r,m]=s.useState("profile"),[h,k]=s.useState(null),S=async t=>{try{if(!window.confirm("Are you sure you want to delete this user?"))return;const d=await fetch(`http://localhost:4000/api/users/${t}`,{method:"DELETE"});if(d.ok)j(o=>o.filter(a=>a.id!==t));else{const o=await d.json();alert("Delete failed: "+o.error)}}catch(n){console.error("Error deleting user:",n),alert("An error occurred while deleting the user.")}};if(s.useEffect(()=>{async function t(){try{const n=await fetch("http://localhost:4000/api/users");if(!n.ok)throw new Error("Failed to fetch users");const o=(await n.json()).map(a=>({id:a.id.toString(),name:a.name,email:a.email,mobile:a.phone||"",bookingsCount:a.bookingsCount||0,joinDate:a.created_at,status:"active"}));u(o)}catch(n){console.error("Fetch error:",n)}finally{w(!1)}}t()},[]),f)return e.jsx("div",{className:"p-4",children:"Loading users..."});const p=g.filter(t=>t.name.toLowerCase().includes(l.toLowerCase())||t.email.toLowerCase().includes(l.toLowerCase())||t.mobile.includes(l)),C=t=>{v(t),x(!0),m("profile")},y=()=>x(!1),c=t=>m(t);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[e.jsx("h1",{className:"text-2xl font-bold text-text-primary",children:"Users Management"}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs("button",{className:"flex items-center px-4 py-2 bg-white border border-gray-300 rounded-md hover:bg-gray-50 transition-colors",children:[e.jsx(M,{size:18,className:"mr-2 text-gray-500"}),e.jsx("span",{children:"Filter"})]}),e.jsxs("button",{className:"flex items-center px-4 py-2 bg-white border border-gray-300 rounded-md hover:bg-gray-50 transition-colors",children:[e.jsx(z,{size:18,className:"mr-2 text-gray-500"}),e.jsx("span",{children:"Export"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-custom",children:[e.jsx("div",{className:"p-4 border-b border-gray-200",children:e.jsxs("div",{className:"relative w-full md:w-72",children:[e.jsx("input",{type:"text",placeholder:"Search users...",className:"pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 w-full",value:l,onChange:t=>b(t.target.value)}),e.jsx(U,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:18})]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Mobile"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Bookings"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Join Date"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsxs("tbody",{className:"bg-white divide-y divide-gray-200",children:[p.map(t=>e.jsxs("tr",{className:`hover:bg-gray-50 ${t.status==="blocked"?"bg-red-50":""}`,children:[e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap flex items-center",children:[e.jsx("div",{className:"h-10 w-10 rounded-full bg-gray-200 flex items-center justify-center text-gray-500",children:e.jsx(E,{size:18})}),e.jsxs("div",{className:"ml-4",children:[e.jsxs("div",{className:"text-sm font-medium text-text-primary",children:[t.name,t.status==="blocked"&&e.jsxs("span",{className:"text-red-600 ml-2 group relative",children:[e.jsx($,{size:14}),e.jsx("span",{className:"hidden group-hover:block absolute -top-8 left-0 bg-red-100 text-red-800 text-xs rounded py-1 px-2 whitespace-nowrap",children:"User access restricted"})]})]}),e.jsxs("div",{className:"text-sm text-gray-500",children:["ID: ",t.id]})]})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-text-secondary",children:t.email}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-text-secondary",children:t.mobile}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-text-secondary",children:t.bookingsCount}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-text-secondary",children:new Date(t.joinDate).toLocaleDateString()}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx(L,{status:t.status,size:"sm"})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[e.jsx("button",{className:"text-primary-600 hover:text-primary-900 mr-4",onClick:()=>C(t),children:"View Profile"}),e.jsxs("div",{className:"relative inline-block text-left",children:[e.jsx("button",{onClick:()=>k(h===t.id?null:t.id),className:"text-gray-600 hover:text-gray-900 focus:outline-none",children:e.jsx(T,{size:16})}),h===t.id&&e.jsx("div",{className:"origin-top-right absolute right-0 mt-2 w-32 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 z-10",children:e.jsx("div",{className:"py-1",children:e.jsx("button",{className:"block w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-red-50",onClick:()=>S(t.id),children:"Delete"})})})]})]})]},t.id)),p.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"text-center py-4 text-gray-500",children:"No users found."})})]})]})})]}),N&&i&&e.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:e.jsxs("div",{className:"flex items-center justify-center min-h-screen p-4 text-center sm:block sm:p-0",children:[e.jsx("div",{className:"fixed inset-0 transition-opacity",onClick:y,children:e.jsx("div",{className:"absolute inset-0 bg-gray-500 opacity-75"})}),e.jsx("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-3xl sm:w-full",children:e.jsxs("div",{className:"bg-white p-6",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-text-primary",children:"User Profile"}),e.jsx("button",{onClick:y,className:"text-gray-400 hover:text-gray-500 focus:outline-none",children:e.jsx("span",{className:"text-2xl",children:"Ã—"})})]}),e.jsx("div",{className:"border-b border-gray-200 mb-4",children:e.jsxs("nav",{className:"flex -mb-px",children:[e.jsx("button",{className:`mr-6 py-4 px-1 text-sm font-medium border-b-2 ${r==="profile"?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,onClick:()=>c("profile"),children:"Profile"}),e.jsx("button",{className:`mr-6 py-4 px-1 text-sm font-medium border-b-2 ${r==="bookings"?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,onClick:()=>c("bookings"),children:"Bookings"}),e.jsx("button",{className:`mr-6 py-4 px-1 text-sm font-medium border-b-2 ${r==="tickets"?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,onClick:()=>c("tickets"),children:"Support Tickets"}),e.jsx("button",{className:`py-4 px-1 text-sm font-medium border-b-2 ${r==="payments"?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,onClick:()=>c("payments"),children:"Payments"})]})}),e.jsxs("div",{children:[r==="profile"&&e.jsxs("div",{children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Name:"})," ",i.name]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Email:"})," ",i.email]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Mobile:"})," ",i.mobile]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Bookings:"})," ",i.bookingsCount]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Joined:"})," ",new Date(i.joinDate).toLocaleDateString()]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Status:"})," ",i.status]})]}),r==="bookings"&&e.jsx("div",{children:"Bookings content here"}),r==="tickets"&&e.jsx("div",{children:"Support Tickets content here"}),r==="payments"&&e.jsx("div",{children:"Payments content here"})]})]})})]})})]})}export{V as default};
