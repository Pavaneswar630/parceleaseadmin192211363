import{r as a,j as e}from"./index-DaQGFzlK.js";import{a as m}from"./axios-B2YOV0tR.js";const S=()=>{const[i,y]=a.useState(""),[r,o]=a.useState(null),[l,d]=a.useState(!1),[p,h]=a.useState(""),[g,x]=a.useState(""),u=async()=>{var t,s;if(i.trim()){d(!0),h(""),x(""),o(null);try{const n=await m.get(`http://localhost:4000/api/parcel/${i.trim()}`);o(n.data)}catch(n){h(((s=(t=n.response)==null?void 0:t.data)==null?void 0:s.error)||"Parcel not found")}finally{d(!1)}}},f=async()=>{var n,j;if(!r)return;const t=prompt("Enter new status (e.g., In Transit, Delivered):");if(!(t!=null&&t.trim()))return alert("Status is required");const s=prompt("Enter current location:");if(!(s!=null&&s.trim()))return alert("Location is required");try{const c=await m.post("http://localhost:4000/api/parcel_timeline",{parcel_id:r.parcel_id,status:t,location:s});x(c.data.message||"Tracking updated successfully"),u()}catch(c){alert(((j=(n=c.response)==null?void 0:n.data)==null?void 0:j.error)||"Failed to update tracking")}};return e.jsxs("div",{style:{maxWidth:600,margin:"auto",padding:20,fontFamily:"Arial"},children:[e.jsx("h2",{children:"Track Your Shipment"}),e.jsx("input",{type:"text",placeholder:"Enter Parcel ID",value:i,onChange:t=>y(t.target.value),style:{padding:"8px",width:"80%",marginRight:10}}),e.jsx("button",{onClick:u,disabled:l,style:{padding:"8px 16px"},children:l?"Loading...":"Track"}),p&&e.jsxs("p",{style:{color:"red",marginTop:15},children:[e.jsx("strong",{children:"Error:"})," ",p]}),g&&e.jsxs("p",{style:{color:"green",marginTop:15},children:[e.jsx("strong",{children:"Success:"})," ",g]}),r&&e.jsxs("div",{style:{marginTop:30,background:"#f9f9f9",padding:20,borderRadius:10},children:[e.jsx("h3",{children:"Parcel Details"}),e.jsxs("p",{children:[e.jsx("strong",{children:"Parcel ID:"})," ",r.parcel_id]}),e.jsxs("p",{children:[e.jsx("strong",{children:"User ID:"})," ",r.user_id]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Pickup Location:"})," ",r.pickup_location]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Drop Location:"})," ",r.drop_location]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Sender:"})," ",r.sender_name," (",r.sender_phone,")"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Receiver:"})," ",r.receiver_name," (",r.receiver_phone,")"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Delivery Type:"})," ",r.deliverytype]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Package Type:"})," ",r.package_type]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Weight:"})," ",r.weight," kg"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Status:"})," ",r.status]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Amount:"})," â‚¹",r.amount]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Created At:"})," ",new Date(r.created_at).toLocaleString()]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Expected Delivery:"})," ",new Date(r.delivery_time).toLocaleString()]}),e.jsx("button",{onClick:f,style:{marginTop:20,padding:"10px 20px",backgroundColor:"#007bff",color:"#fff",border:"none",borderRadius:5,cursor:"pointer"},children:"Update Tracking"})]})]})};export{S as default};
