import{r as t,j as e,C as m}from"./index-DaQGFzlK.js";function b(){const[d,l]=t.useState([]),[c,n]=t.useState(!0),[o,i]=t.useState(null);return t.useEffect(()=>{async function r(){try{const a=await fetch("http://localhost:4000/api/payments");if(!a.ok)throw new Error(`Failed to fetch payments: ${a.statusText}`);const x=(await a.json()).map(s=>({...s,amount:typeof s.amount=="string"?parseFloat(s.amount):s.amount,parcel_id:s.parcel_id??null,payment_status:s.payment_status??"Pending"}));l(x)}catch(a){i(a.message||"Unknown error")}finally{n(!1)}}r()},[]),c?e.jsx("p",{children:"Loading payments..."}):o?e.jsxs("p",{className:"text-red-600",children:["Error: ",o]}):e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("h1",{className:"text-2xl font-bold text-text-primary",children:"Payments & Transactions"})}),d.length===0?e.jsxs("div",{className:"bg-white p-10 rounded-lg shadow-custom flex flex-col items-center justify-center text-center",children:[e.jsx(m,{size:48,className:"text-primary-300 mb-4"}),e.jsx("h2",{className:"text-xl font-semibold text-text-primary mb-2",children:"No Payments Found"}),e.jsx("p",{className:"text-text-secondary max-w-md mb-6",children:"No payment transactions are available at the moment."})]}):e.jsx("div",{className:"overflow-x-auto bg-white p-6 rounded-lg shadow-custom",children:e.jsxs("table",{className:"w-full table-auto border-collapse border border-gray-300 text-left",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100",children:[e.jsx("th",{className:"border border-gray-300 px-4 py-2",children:"ID"}),e.jsx("th",{className:"border border-gray-300 px-4 py-2",children:"User ID"}),e.jsx("th",{className:"border border-gray-300 px-4 py-2",children:"Parcel ID"}),e.jsx("th",{className:"border border-gray-300 px-4 py-2",children:"Amount (rupees)"}),e.jsx("th",{className:"border border-gray-300 px-4 py-2",children:"Payment Method"}),e.jsx("th",{className:"border border-gray-300 px-4 py-2",children:"Payment Status"}),e.jsx("th",{className:"border border-gray-300 px-4 py-2",children:"Transaction ID"}),e.jsx("th",{className:"border border-gray-300 px-4 py-2",children:"Created At"})]})}),e.jsx("tbody",{children:d.map(r=>e.jsxs("tr",{className:"odd:bg-white even:bg-gray-50",children:[e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:r.id}),e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:r.user_id}),e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:r.parcel_id??"N/A"}),e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:r.amount.toFixed(2)}),e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:r.payment_method}),e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:r.payment_status??"Pending"}),e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:r.transaction_id}),e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:new Date(r.created_at).toLocaleString()})]},r.id))})]})})]})}export{b as default};
