import{c as m,r as t,j as e}from"./index-DaQGFzlK.js";import{M as u}from"./more-vertical-BsmNKZGc.js";import{T as y}from"./trash-2-D_WFC8yj.js";/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j=m("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);function b(){const[r,c]=t.useState([]),[d,i]=t.useState(!0),[l,o]=t.useState(null),x=async()=>{try{const n=await(await fetch("http://localhost:4000/api/support-tickets")).json();c(n)}catch(s){console.error("Failed to fetch tickets:",s)}finally{i(!1)}},h=async s=>{if(confirm("Are you sure you want to delete this ticket?"))try{await fetch(`http://localhost:4000/api/support-tickets/${s}`,{method:"DELETE"}),c(a=>a.filter(p=>p.id!==s))}catch(a){console.error("Error deleting ticket:",a)}};return t.useEffect(()=>{x()},[]),e.jsxs("div",{className:"space-y-6 p-4",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Support Tickets"})}),d?e.jsx("p",{className:"text-center text-sm text-gray-600",children:"Loading support tickets..."}):r.length===0?e.jsxs("div",{className:"bg-white p-10 rounded-lg shadow flex flex-col items-center justify-center text-center",children:[e.jsx(j,{size:48,className:"text-blue-300 mb-4"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-2",children:"No Support Tickets"}),e.jsx("p",{className:"text-gray-500 max-w-md mb-4",children:"There are currently no support tickets available."})]}):e.jsx("div",{className:"overflow-auto bg-white rounded-lg shadow",children:e.jsxs("table",{className:"min-w-full text-sm text-left",children:[e.jsx("thead",{className:"bg-gray-100 text-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3",children:"ID"}),e.jsx("th",{className:"px-4 py-3",children:"User ID"}),e.jsx("th",{className:"px-4 py-3",children:"Subject"}),e.jsx("th",{className:"px-4 py-3",children:"Message"}),e.jsx("th",{className:"px-4 py-3",children:"Response"}),e.jsx("th",{className:"px-4 py-3",children:"Status"}),e.jsx("th",{className:"px-4 py-3",children:"Created At"}),e.jsx("th",{className:"px-4 py-3 text-right",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:r.map(s=>e.jsxs("tr",{className:"hover:bg-gray-50 relative",children:[e.jsx("td",{className:"px-4 py-3",children:s.id}),e.jsx("td",{className:"px-4 py-3",children:s.user_id}),e.jsx("td",{className:"px-4 py-3",children:s.subject}),e.jsx("td",{className:"px-4 py-3 max-w-sm truncate",children:s.message}),e.jsx("td",{className:"px-4 py-3 max-w-sm truncate",children:s.response||"-"}),e.jsx("td",{className:"px-4 py-3 capitalize",children:s.status}),e.jsx("td",{className:"px-4 py-3",children:s.created_at}),e.jsxs("td",{className:"px-4 py-3 text-right",children:[e.jsx("button",{className:"p-2 rounded-full hover:bg-gray-100",onClick:()=>o(l===s.id?null:s.id),children:e.jsx(u,{className:"w-4 h-4"})}),l===s.id&&e.jsx("div",{className:"absolute right-4 mt-2 w-40 bg-white border border-gray-200 rounded shadow z-10",children:e.jsxs("button",{onClick:()=>h(s.id),className:"w-full flex items-center px-4 py-2 text-red-600 hover:bg-gray-100",children:[e.jsx(y,{className:"w-4 h-4 mr-2"})," Delete"]})})]})]},s.id))})]})})]})}export{b as default};
